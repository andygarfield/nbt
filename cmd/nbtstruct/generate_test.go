package main

import (
	"bytes"
	"fmt"
	"os"
	"testing"
)

func TestCreateStruct(t *testing.T) {
	helloWorld := bytes.NewReader([]byte{
		0x0a, 0x00, 0x0b, 0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f,
		0x72, 0x6c, 0x64, 0x08, 0x00, 0x04, 0x6e, 0x61, 0x6d, 0x65, 0x00,
		0x09, 0x42, 0x61, 0x6e, 0x61, 0x6e, 0x72, 0x61, 0x6d, 0x61, 0x00,
	})
	s := CreateStruct(helloWorld)
	if s != `type HelloWorld struct {
	Name string
}` {
		t.Fail()
	}
	fmt.Println(s)

	f, err := os.Open("bigtest_expanded.nbt")
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(CreateStruct(f))
}
